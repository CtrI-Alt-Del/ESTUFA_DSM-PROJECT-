{% from "components/label.html" import label %}

<form
  class="grid place-content-center h-50"
  hx-post="{{ url_for('plants_views.create_plant_by_form_view') }}"
  hx-target="#plants"
  hx-target-error
  hx-swap="innerHTML"
  enctype="multipart/form-data"
  data-query-param="hx-post">
  {{ create_plant_form.csrf_token }}
  <div class="flex flex-col place-items-center">
    <div class="input-container mt-5">
      {{
      label(
      id="create-plant-name",
      title=create_plant_form.name.label,
      icon="plant"
      )
      }}
      {{ create_plant_form.name(id="create-plant-name", class="input-field") }}
    </div>
    <div class="flex flex-col input-container gap-2 place-items-center">
      <button id="burronNativeColor" type="button"
        class="relative flex justify-center items-center gap-2 rounded-lg bg-blue-600 px-3 py-2.5 text-xs font-medium uppercase leading-tight text-white shadow-md transition duration-150 ease-in-out hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg">

        {{ create_plant_form.hex_color(class="") }}

        <i class="text-2xl ph ph-plant"></i>
        <p data-color-input="preview">Exemplo</p>
      </button>
    </div>
  </div>
  <div class="flex items-center justify-center w-full gap-4 mt-6">
    <button data-modal-hide="create-checklist-records-modal" type="button"
      class="w-28 focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-600 font-medium rounded-2xl text-sm px-5 py-2.5 me-2 mb-2 dark:focus:ring-red-950">
      Cancelar
    </button>
    <button data-modal-hide="create-checklist-records-modal" type="submit"
      class="w-28 focus:outline-none text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:ring-gray-600 font-medium rounded-2xl text-sm px-5 py-2.5 me-2 mb-2 dark:focus:ring-gray-950">
      Enviar
    </button>
  </div>
</form>

<script>
  const colorPicker = document.querySelectorAll("[data-color-picker='control']");
  const changeColorBtn = document.querySelector("[data-color-picker='button']");
  const plantInput = document.querySelector("[data-color-picker='name']");
  const exempleText = document.querySelector("[data-color-picker='preview']");

  changeColorBtn.style.backgroundColor = colorPicker.value;
  colorPicker.addEventListener("input", () => {
    changeColorBtn.style.backgroundColor = colorPicker.value;
  });
  plantInput.addEventListener("input", (text) => {
    exempleText.innerHTML = plantInput.value
    console.log(exempleText)
  })
</script>