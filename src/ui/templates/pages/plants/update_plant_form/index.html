{% from "components/modal.html" import modal_controls %}
{% from "components/label.html" import label %}

<form
  class="grid place-content-center h-50"
  hx-post="{{ url_for('plants_views.create_plant_by_form_view') }}"
  hx-target="#plants-cards"
  hx-target-error
  hx-swap="innerHTML"
  enctype="multipart/form-data"
  data-query-param="hx-post">
  {{ create_plant_form.csrf_token }}
  <div class="flex flex-col place-items-center">
    <div class="input-container mt-10">
      {{
      label(
      id="create-plant-name",
      title=create_plant_form.name.label,
      icon="plant"
      )
      }}
      {{ create_plant_form.name(id="create-plant-name", class="input-field") }}
    </div>
    <div class="input-container flex flex-col mt-6 gap-2 place-items-center">
      <label
        id="burronNativeColor"
        for="create-plant-form-hex-color"
        class="relative flex justify-center items-center gap-2 rounded-lg bg-blue-600 px-3 py-2.5 text-xs font-medium uppercase leading-tight text-white shadow-md transition duration-150 ease-in-out hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg">

        {{
        create_plant_form.hex_color(
        id="create-plant-form-hex-color",
        class="absolute invisible")
        }}

        <i class="text-2xl ph ph-plant"></i>
        <p data-color-input="preview">Nome da planta</p>
      </label>
    </div>
  </div>
  <div class="mt-10">
    {{ modal_controls(modal_id="create-plants-modal") }}
  </div>
</form>

<script>
  const colorPicker = document.querySelectorAll("[data-color-picker='control']");
  const changeColorBtn = document.querySelector("[data-color-picker='button']");
  const plantInput = document.querySelector("[data-color-picker='name']");
  const exempleText = document.querySelector("[data-color-picker='preview']");

  changeColorBtn.style.backgroundColor = colorPicker.value;
  colorPicker.addEventListener("input", () => {
    changeColorBtn.style.backgroundColor = colorPicker.value;
  });
  plantInput.addEventListener("input", (text) => {
    exempleText.innerHTML = plantInput.value
    console.log(exempleText)
  })
</script>